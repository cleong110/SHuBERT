# Reworked Feature Extraction Pipeline
Simplified it all
* the file lists are automatically generated by the scripts themselves.
* each script looks in the "right" place to find the files it needs by default. 

```
# Setup: put files in "raw_vids", navigate to repo root dir "SHuBERT"
conda env create -f environment_feature_extraction.yml --n shubert_feature_extraction
conda activate shubert_feature_extraction

# run the pipeline
python download_models.py # downloads to "models"
python dataset/write_list.py # will write the raw_vids list to raw_vids by default
python dataset/clips_bbox.py # automatically looks for raw_vids list, writes list to bbox_clips, no need to call write_list
python dataset/kpe_mediapipe.py # should automatically look in bbox_clips and write to kpe_poses
python dataset/crop_hands.py # should automatically look in kpe_poses, write to pose_hand_crops
python dataset/crop_face.py # should automatically look in kpe_poses, write to pose_face_crops
python features/body_features.py # automatically loads, automatically saves to body_features
python features/dinov2_features.py # saves to dinov2_face_embeddings, AND dinov2_hand_embeddings

# run shubert inference step
conda env create -f environment_shubert.yml -n shubert_inference
conda activate shubert_inference
cd fairseq && pip install -e .
python features/shubert_inference.py
```